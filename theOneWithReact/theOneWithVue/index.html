<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vue Hello World</title>
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
</head>
<body>
  <div id="app">
    <h1>{{message}}</h1>
    <div>
		<p v-if="score >= 90">A</p>
		<p v-else-if="score >= 80">B</p>
		<p v-else-if="score >= 70">C</p>
		<p v-else>F</p>
  	</div>
  	<div>
    	<p v-if="isPremiumUser">Premium Content</p>
    	<p v-else>Basic Content</p>
  	</div>
  	<div id="app">
		<p>Current Count: {{ count }}</p>
		<button @click="incrementCount(5)">Increment by 5</button>
		<button @click="resetCount">Reset Count</button>
		<p v-if="isCountHigh">Count is high!</p>
		<p v-if="isCountReallyHigh">Count is really high!</p>
  	</div>
  
  	</br>
  	<div>
  		<!-- Search bar -->
  	
		<input type="text" v-model="searchQuery" placeholder="Enter search term" />
		<p v-if="loading">Loading...</p>
		<ul v-else>
		  <li v-for="result in searchResults" :key="result">		<!-- for x in -->
		    {{ result }}
		  </li>
		</ul>
		<p v-if="error">{{ error }}</p>
	</div>
  	
  </div>
  

  <script>
    new Vue({
      el: '#app',
      data() {
        return {
          message: 'Hello, Vue 3!',
          score: 85,
          isPremiumUser: true,
          number: 4,
          count: 0,
          
          searchQuery: '',	//Search
		  searchResults: ["apple", "pear"], //Search
		  loading: false, 	//Search
		  error: null,		 //Search
        };
      },
      methods: {
        incrementCount(amount) {
          this.count += amount;
        },
        resetCount() {
          this.count = 0;
        },
      },
      computed: {
        isCountHigh() {
          return this.count > 10 && this.count < 21;
        },
        isCountReallyHigh() {
          return this.count > 20;
        },
      },
      
      //Search					//Search
      watch: {
		searchQuery(newQuery, oldQuery) {
		  // Debounce the search to avoid excessive API calls
		  if (this.searchTimeout) {
		    clearTimeout(this.searchTimeout);
		  }

		  this.searchTimeout = setTimeout(() => {
		    if (newQuery) {
		      this.loading = true;
		      this.error = null;

		      // Simulate an asynchronous API call (replace with your actual API)
		      setTimeout(() => {
		        if (newQuery.toLowerCase() === 'error') {
		          this.error = "Search failed.";
		          this.loading = false;
		          this.searchResults = [];
		          return;
		        }

		        const results = ['Result 1', 'Result 2', 'Result 3'].filter(result =>
		          result.toLowerCase().includes(newQuery.toLowerCase())
		        );
		        
		        /*const results = searchResults.filter(result =>
		          result.toLowerCase().includes(newQuery.toLowerCase())
		        );*/

		        this.searchResults = results;
		        this.loading = false;
		      }, 500); // Simulate 500ms API delay
		    } else {
		      this.searchResults = [];
		    }
		  }, 300); // Debounce delay of 300ms
		},
	  },
	  beforeDestroy() {
		if (this.searchTimeout) {
		  clearTimeout(this.searchTimeout);
		}
	  },
    });
  </script>
</body>
</html>

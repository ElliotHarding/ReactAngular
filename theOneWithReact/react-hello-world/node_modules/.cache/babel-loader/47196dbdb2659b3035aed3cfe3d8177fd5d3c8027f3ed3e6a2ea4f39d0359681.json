{"ast":null,"code":"import React,{useState,useEffect}from'react';import'./Products.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ProductList(){var[products,setProducts]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[newProductName,setNewProductName]=useState('');const[newProductPrice,setNewProductPrice]=useState('');const fetchData=async()=>{setLoading(true);setError(null);console.log(\"Running fetch data\");try{const response=await fetch('http://localhost:5000/api/Products');if(!response.ok){throw new Error(`HTTP error! status: ${response.status}`);}const data=await response.json();console.log(\"API data:\",data);// added console log\nsetProducts(data);console.log(\"Products state:\",products);//added console log\nconsole.log(\"Is array:\",Array.isArray(products));//added console log\n}catch(err){setError(err);}finally{setLoading(false);}};//Delete data\nconst handleDelete=async id=>{try{const response=await fetch(`http://localhost:5000/api/Products/${id}`,{method:'DELETE'});if(!response.ok){throw new Error(`HTTP error! status: ${response.status}`);}console.log(\"Legnth of products: \"+products.length);console.log(\"Products: \");console.log(products);// Update the product list after successful deletion\nsetProducts(prevProducts=>prevProducts.filter(product=>product.id!==id));}catch(err){setError(err);}};useEffect(()=>{fetchData();},[]);//Add product\nconst handleAddProduct=async()=>{try{const response=await fetch('http://localhost:5000/api/Products/',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({name:newProductName,price:parseFloat(newProductPrice)})});if(!response.ok){throw new Error(`HTTP error! status: ${response.status}`);}const newProduct=await response.json();setProducts(prevProducts=>[...prevProducts,newProduct]);setNewProductName('');setNewProductPrice('');//clear form.      \n}catch(err){setError(err);}};if(error){return/*#__PURE__*/_jsx(\"h1\",{children:error.message});}return/*#__PURE__*/_jsxs(\"div\",{className:\"ProductList\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Products (Dotnet) \",/*#__PURE__*/_jsx(\"button\",{onClick:()=>fetchData(),children:\"Fetch Data!\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Product Name\",value:newProductName,onChange:e=>setNewProductName(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"Product Price\",value:newProductPrice,onChange:e=>setNewProductPrice(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAddProduct,children:\"Add Product\"})]}),/*#__PURE__*/_jsx(\"ul\",{children:products&&products.map(product=>/*#__PURE__*/_jsxs(\"li\",{children:[product.name,\" - $\",product.price,/*#__PURE__*/_jsx(\"a\",{children:\"   \"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(product.id),children:\"X\"})]},product.id))})]});}export default ProductList;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","ProductList","products","setProducts","loading","setLoading","error","setError","newProductName","setNewProductName","newProductPrice","setNewProductPrice","fetchData","console","log","response","fetch","ok","Error","status","data","json","Array","isArray","err","handleDelete","id","method","length","prevProducts","filter","product","handleAddProduct","headers","body","JSON","stringify","name","price","parseFloat","newProduct","children","message","className","onClick","type","placeholder","value","onChange","e","target","map"],"sources":["/home/hello/Documents/Git/ReactAngular/theOneWithReact/react-hello-world/src/Products.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\n\nimport './Products.css';\n\nfunction ProductList() {\n  \n  var [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [newProductName, setNewProductName] = useState('');\n  const [newProductPrice, setNewProductPrice] = useState('');\n  \n  const fetchData = async () => {\n      setLoading(true);\n      setError(null);\n      \n      console.log(\"Running fetch data\");\n\n      try {\n        const response = await fetch('http://localhost:5000/api/Products');\n\n        if (!response.ok) {\n          throw new Error(`HTTP error! status: ${response.status}`);\n        }\n\n        const data = await response.json();\n        console.log(\"API data:\", data); // added console log\n        setProducts(data);\n        console.log(\"Products state:\", products); //added console log\n        console.log(\"Is array:\", Array.isArray(products)); //added console log\n\n      } catch (err) {\n        setError(err);\n      } finally {\n        setLoading(false);\n      }\n    };\n    \n    //Delete data\n  \tconst handleDelete = async (id) => {\n    try {\n      const response = await fetch(`http://localhost:5000/api/Products/${id}`, {\n        method: 'DELETE',\n      });\t\n\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      \n      console.log(\"Legnth of products: \" + products.length)\n      console.log(\"Products: \")\n      console.log(products)\n      \n      // Update the product list after successful deletion\n      setProducts((prevProducts) => prevProducts.filter((product) => product.id !== id));  \n    } catch (err) {\n      setError(err);\n    }\n  };\n  \n   useEffect(() => {\n\t\tfetchData();\n   }, []);\n   \n  //Add product\n  const handleAddProduct = async () => {\n    try {\n      const response = await fetch('http://localhost:5000/api/Products/', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          name: newProductName,\n          price: parseFloat(newProductPrice),\n        }),\n      });\n\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n\n      const newProduct = await response.json();\n      setProducts((prevProducts) => [...prevProducts, newProduct]);\n      setNewProductName('');\n      setNewProductPrice(''); //clear form.      \n    } catch (err) {\n      setError(err);\n    }\n  };\n  \n  if(error)\n  {\n  \treturn <h1>{error.message}</h1>;\n  }\n\n  return (\n  \t<div className=\"ProductList\">\n  \t\n\t  \t<h2>Products (Dotnet) <\n\t  \tbutton onClick={() => fetchData()}>Fetch Data!</button>\n\t  \t</h2>\n\t  \t\n\t  \t<div>\n\t\t    <input\n\t\t      type=\"text\"\n\t\t      placeholder=\"Product Name\"\n\t\t      value={newProductName}\n\t\t      onChange={(e) => setNewProductName(e.target.value)}\n\t\t    />\n\t\t    <input\n\t\t      type=\"number\"\n\t\t      placeholder=\"Product Price\"\n\t\t      value={newProductPrice}\n\t\t      onChange={(e) => setNewProductPrice(e.target.value)}\n\t\t    />\n\t\t    <button onClick={handleAddProduct}>Add Product</button>\n      \t</div>\n\t  \t\n\t  \t<ul>\n\t\t    {products && products.map((product) => (\n\t\t      <li key={product.id}>\n\t\t        {product.name} - ${product.price}\n\t\t        <a>   </a>\n\t\t        <button onClick={() => handleDelete(product.id)}>X</button>\n\t\t      </li>\n\t\t    ))}\n      </ul>\n  \t</div>\n  );\n}\n\nexport default ProductList;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}